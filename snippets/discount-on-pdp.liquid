<div class="discount-container">
  <div class="coupon">
    <div class="discount-info">
      <span class="mega-deal code1" id="code1">Rakhi20</span>
      <span class="get-price">
        <div class="details-container">
          <button class="details-btn">Details</button>
          <div class="terms">
            <!-- <div class="terms" style="top: 431.594px; left: 362px;"> -->
            <p>Flat 20% Off on your purchase with no minimum value. Offer valid till 9th August. Other T&amp;Cs may apply.</p>
          </div>
        </div>
      </span>
    </div>
    <div class="extra-offer">
      <span>Flat 20% Off</span>
      <button class="details-btn copy-btn copy-btn1" onclick="copyCode('code1', this)" id="copy-btn1">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="16"
          width="16"
          style="vertical-align:middle; margin-right:4px;"
          fill="currentColor"
          viewBox="0 0 16 16"
        >
          <path d="M10 1H2a1 1 0 0 0-1 1v10h1V2h8V1z"/>
          <path d="M14 3H6a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm0 1v11H6V4h8z"/>
        </svg>
        Copy
      </button>
    </div>
  </div>

  <div class="coupon">
    <div class="discount-info">
      <span class="mega-deal" id="code2">TGS500</span>
      <span class="get-price">
        <div class="details-container">
          <button class="details-btn">Details</button>
          <div class="terms">
            <!-- <div class="terms" style="top: 431.594px; left: 922px;"> -->
            <p>Flat Rs. 500 off on your minimum purchase of Rs. 1999. Other T&amp;Cs may apply.</p>
          </div>
        </div>
      </span>
    </div>
    <div class="extra-offer">
      <span>Flat Rs. 500 off</span>
      <button class="details-btn copy-btn copy-btn2" onclick="copyCode('code2', this)" id="copy-btn2">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="16"
          width="16"
          style="vertical-align:middle; margin-right:4px;"
          fill="currentColor"
          viewBox="0 0 16 16"
        >
          <path d="M10 1H2a1 1 0 0 0-1 1v10h1V2h8V1z"/>
          <path d="M14 3H6a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm0 1v11H6V4h8z"/>
        </svg>
        Copy
      </button>
    </div>
  </div>
  <div class="coupon">
    <div class="discount-info">
      <span class="mega-deal code3" id="code3">TGS1000</span>
      <span class="get-price">
        <div class="details-container">
          <button class="details-btn">Details</button>
          <div class="terms">
            <!-- <div class="terms" style="top: 431.594px; left: 922px;"> -->
            <p>Flat Rs. 1000 off on your minimum purchase of Rs. 4999. Other T&amp;Cs may apply.</p>
          </div>
        </div>
      </span>
    </div>
    <div class="extra-offer">
      <span>Flat Rs. 1000 off</span>
      <button class="details-btn copy-btn copy-btn3" onclick="copyCode('code3', this)" id="copy-btn3">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="16"
          width="16"
          style="vertical-align:middle; margin-right:4px;"
          fill="currentColor"
          viewBox="0 0 16 16"
        >
          <path d="M10 1H2a1 1 0 0 0-1 1v10h1V2h8V1z"/>
          <path d="M14 3H6a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm0 1v11H6V4h8z"/>
        </svg>
        Copy
      </button>
    </div>
  </div>
</div>

<style>
      /* Container for the discount offer */
    .discount-container {
        display: flex;
        overflow-x: auto; /* Enable horizontal scrolling */
        padding: 10px;
        border-radius: 8px;
        gap: 15px; /* Space between the coupons */
        scrollbar-width: thin; /* Set the scrollbar width to thin */
        scrollbar-color: #ffdba6 #f0f0f0; /* Scrollbar color: thumb and track */
    }

    /* Coupon box styling */
    .coupon {
        display: flex;
        flex-direction: column;
        padding: 10px;
        background-color: #ffffff;
        border-radius: 8px;
        width: 250px; /* Fixed width for each coupon */
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        flex-shrink: 0; /* Prevent the coupons from shrinking */
    }

    /* Discount information */
    .discount-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .mega-deal {
        background-color: #ffdba6;
        color: black;
        padding: 5px 10px;
        font-size: 14px;
        border-radius: 20px;
        font-weight: bold;
    }

    .get-price {
        font-size: 18px;
        font-weight: bold;
    }

    .get-price .price {
        color: #f85c7b;
        text-decoration: line-through;
        margin-left: 5px;
        font-size: 16px;
    }

    /* Extra offer section */
    .extra-offer {
        margin-top: 8px;
        font-size: 14px;
        color: black;
        font-weight: bold;
    }

    /* Terms and Conditions on hover */
    .details-container {
        position: relative;
    }

    .details-btn {
        padding: 5px 10px;
        background-color: black;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 14px;
        cursor: pointer;
    }
  .copy-btn{
    float:right;
  }
    .terms {
        position: fixed;
        max-height: -moz-max-content;
      max-height: max-content;
        bottom: 30px;
        right: 0px;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        font-size: 12px;
        color: #555;
        width: 200px; /* Adjust the width of the box */
        max-height: 150px; /* Set a max-height to prevent overflow */
        overflow-y: auto; /* Allow vertical scrolling if content is too long */
        display: none;
        z-index: 10; /* Ensure the terms text appears above the button */
    }


    @media (max-width: 565px) {
      .discount-container .coupon {
        width: 90%;
      }
    }

    .details-container:hover .terms {
        display: block; /* Show the terms when hovering */
    }

    /* Scrollbar styling */
    .discount-container::-webkit-scrollbar {
        height: 8px; /* Set the scrollbar height */
    }

    .discount-container::-webkit-scrollbar-thumb {
        background-color: #ffdba6; /* Color of the thumb (scroll handle) */
        border-radius: 10px; /* Rounded corners for the scrollbar thumb */
    }

    .discount-container::-webkit-scrollbar-track {
        background-color: #f0f0f0; /* Color of the track (scroll background) */
        border-radius: 10px; /* Rounded corners for the scrollbar track */
    }
</style>
<script>
    // Added by velocity support on 24-01-2025 to add the discount coupons scrollable
  $(document).ready(function () {
    $(".details-btn").on("mouseenter", function () {
      handleTooltipPos(this);
    });

    $(window).on("scroll", function () {
      $(".details-btn").each(function () {
        handleTooltipPos(this);
      });
    });

    $(".discount-container").on("scroll", function () {
      $(".details-btn").each(function () {
        handleTooltipPos(this);
      });
    });

function handleTooltipPos(element) {
  const $parent = $(element).closest(".discount-info");
  if ($parent.length === 0) return;

  const parent = $parent[0];
  const container = parent.getBoundingClientRect();
  const btn = element.getBoundingClientRect(); // Get the bounding rectangle of the hovered element
  const tooltip = $(element).parents(".details-container").find(".terms");

  // Calculate initial position
  let top = btn.top + 30; // Adjust top position
  let left = btn.left; // Adjust left position

  // Adjust for viewport boundaries
  const tooltipWidth = tooltip.outerWidth();
  const tooltipHeight = tooltip.outerHeight();
  const viewportWidth = window.innerWidth;
  const viewportHeight = window.innerHeight;

  // Ensure the tooltip doesn't go beyond the right edge of the screen
  if (left + tooltipWidth > viewportWidth) {
    left = viewportWidth - tooltipWidth - 10; // Add a small margin
  }

  // Ensure the tooltip doesn't go beyond the bottom edge of the screen
  if (top + tooltipHeight > viewportHeight) {
    top = btn.top - tooltipHeight - 10; // Position above the element
  }

  // Apply the adjusted position
  tooltip.css({
    top: top + "px",
    left:
      container.left + ($parent.width() - tooltip.width()) - 20 + "px",
  });
}

  });
  function copyCode(codeId, btnElement) {
    const codeElement = document.getElementById(codeId);
    const codeText = codeElement ? codeElement.innerHTML : "";

    if (!codeText) return;

    const textarea = document.createElement("textarea");
    textarea.value = codeText;
    textarea.style.position = "fixed"; // prevents scrolling on mobile
    document.body.appendChild(textarea);
    textarea.focus();
    textarea.select();
    document.execCommand("copy");
    document.body.removeChild(textarea);

    // Update button text to "Copied!"
    btnElement.innerText = "Copied!";
    setTimeout(() => {
     btnElement.innerHTML = `
  <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" style="vertical-align:middle; margin-right:4px;" fill="currentColor" viewBox="0 0 16 16">
    <path d="M10 1H2a1 1 0 0 0-1 1v10h1V2h8V1z"/>
    <path d="M14 3H6a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm0 1v11H6V4h8z"/>
  </svg> Copy
`;
    }, 1500);
  }
</script>
